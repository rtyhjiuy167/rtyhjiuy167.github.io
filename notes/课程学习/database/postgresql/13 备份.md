#### 备份方式

1. 完整数据库备份

   备份数据库所有内容，包括用户、视图、序列

2. 差异数据库备份

   只备份自上次数据库备份依赖发生变化的数据

3. 事务日志备份

   只备份自上一次日志备份以来的事务日志数据。支持事务回滚操作。使用事务日志备份文件可以将数据库恢复到故障点时刻的状态

4. 文件备份

   数据库通常由存储在磁盘上的若干数据文件构成。可以直接通过复制数据库文件方式实现数据库备份。这种文件备份方式与事务日志备份方式结合才有实际意义

   

#### 备份

1. 使用 pg_dump 实用程序工具进行数据备份

   pg_dump 实用程序工具用于备份单个数据库,它不会导出角色和表空间相关的信息，因为这些信息是整个数据库集群共用的，不属于某个单独的数据库。

   在PostgreSQL的安装目录的bin目录下，打开终端

   ```shell
   # 以sql形式备份数据库表、数据
   pg_dump -h localhost -p 5432 -U postgres -f d:\ProjectDB.sql -d dbname
   ```

   ```shell
   # 以sql形式备份数据库表
   pg_dump -h localhost -p 5432 -U postgres -f d:\ProjectDB.sql -d dbname -s
   ```

   ```shell
   # 以sql形式备份数据
   pg_dump -h localhost -p 5432 -U postgres -f d:\ProjectDB.sql -d dbname -a
   ```

| 选项 |               作用               |
| :--: | :------------------------------: |
|  -d  |       指定需备份的数据库名       |
|  -h  | 数据库服务器的主机名或套接字目录 |
|  -p  |       数据库服务器的端口号       |
|  -U  |       指定连接数据库的用户       |
|  -f  |         输出文件或目录名         |
|  -a  |    只转储数据，不包括 schema     |
|  -s  |     只转储schema，不包括数据     |
|  -n  |     只转储指定名称的 schema      |
|  -N  |     不转储指定名称的 schema      |

1. 使用 pg_dumpall 实用程序工具进行数据备份

   pg_dumpall 实用程序工具用于备份整个数据库集群及系统全局数据库





